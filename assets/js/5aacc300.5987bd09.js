"use strict";(self.webpackChunkplu_ts_docs=self.webpackChunkplu_ts_docs||[]).push([[7544],{44192:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>d,metadata:()=>l,toc:()=>t});var i=r(17624),o=r(4552);const d={title:"TxBuilder",sidebar_position:0},s="TxBuilder",l={id:"offchain/TxBuilder API/TxBuilder",title:"TxBuilder",description:"plu-ts/offchain exposes the TxBuilder class.",source:"@site/docs/offchain/TxBuilder API/TxBuilder.mdx",sourceDirName:"offchain/TxBuilder API",slug:"/offchain/TxBuilder API/TxBuilder",permalink:"/offchain/TxBuilder API/TxBuilder",draft:!1,unlisted:!1,editUrl:"https://github.com/HarmonicLabs/plu-ts-docs/docs/offchain/TxBuilder API/TxBuilder.mdx",tags:[],version:"current",sidebarPosition:0,frontMatter:{title:"TxBuilder",sidebar_position:0},sidebar:"tutorialSidebar",previous:{title:"TxBuilder API",permalink:"/category/txbuilder-api"},next:{title:"buildSync",permalink:"/offchain/TxBuilder API/buildSync"}},c={},t=[{value:"How to use",id:"how-to-use",level:2},{value:"Methods",id:"methods",level:2},{value:"<code>buildSync</code> or <code>runWithProvider</code>",id:"buildsync-or-runwithprovider",level:2},{value:"Pro and Cons",id:"pro-and-cons",level:3}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.M)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"txbuilder",children:(0,i.jsx)(n.code,{children:"TxBuilder"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"plu-ts/offchain"})," exposes the ",(0,i.jsx)(n.code,{children:"TxBuilder"})," class."]}),"\n",(0,i.jsx)(n.h2,{id:"how-to-use",children:"How to use"}),"\n",(0,i.jsx)(n.p,{children:"Its purpose is to allow you to build transactions more easly."}),"\n",(0,i.jsxs)(n.p,{children:["You could infact build transactions by calling the ",(0,i.jsx)(n.a,{href:"../cardano-ledger-ts/classes/Tx",children:(0,i.jsx)(n.code,{children:"Tx"})})," constructor."]}),"\n",(0,i.jsx)(n.p,{children:"However that requires a profound understanding of the structure of a Cardano transaction."}),"\n",(0,i.jsxs)(n.p,{children:["for this reason we have the ",(0,i.jsx)(n.code,{children:"TxBuilder"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["You can get your ",(0,i.jsx)(n.code,{children:"TxBuilder"})," by passing the ",(0,i.jsx)(n.a,{href:"../cardano-ledger-ts/interfaces/ProtocolParameters",children:(0,i.jsx)(n.code,{children:"ProtocolParameters"})})," (that you'll need to query)\nneeded for the network you are building transactions for."]}),"\n",(0,i.jsx)(n.p,{children:"constructor definiton:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"constructor(\n    protocolParamters: Readonly<ProtocolParameters>,\n    genesisInfos?: GenesisInfos\n)\n"})}),"\n",(0,i.jsx)(n.p,{children:"example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'type MyFavoriteServiceResponse = any\n\n// you\'ll need to adapt the protocol parameters\n// to the expected interface\nfunction adaptServiceProtocolParams(\n    response: MyFavoriteServiceResponse\n): ProtocolParameters\n{\n    /* do your magic */\n}\n\nconst txBuilder = new TxBuilder(\n    adaptServiceProtocolParams(\n        await fetch("my-favorite-service.com/api/protocol-parameters")\n    )\n);\n'})}),"\n",(0,i.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,i.jsx)(n.p,{children:"once you have your tx builder you can use all the following methods."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./buildSync",children:(0,i.jsx)(n.code,{children:"buildSync"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./runWithProvider",children:(0,i.jsx)(n.code,{children:"runWithProvider"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./keepRelevant",children:(0,i.jsx)(n.code,{children:"keepRelevant"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./calcLinearFee",children:(0,i.jsx)(n.code,{children:"calcLinearFee"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./getMinimumOutputLovelaces",children:(0,i.jsx)(n.code,{children:"getMinimumOutputLovelaces"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./setGenesisInfos",children:(0,i.jsx)(n.code,{children:"setGenesisInfos"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./slotToPOSIX",children:(0,i.jsx)(n.code,{children:"slotToPOSIX"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./posixToSlot",children:(0,i.jsx)(n.code,{children:"posixToSlot"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./overrideTxRedeemers",children:(0,i.jsx)(n.code,{children:"overrideTxRedeemers"})})}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"buildsync-or-runwithprovider",children:[(0,i.jsx)(n.code,{children:"buildSync"})," or ",(0,i.jsx)(n.code,{children:"runWithProvider"})]}),"\n",(0,i.jsxs)(n.p,{children:["once you have a ",(0,i.jsx)(n.code,{children:"TxBuilder"})," instance there are 2 ways to build a transaction:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["using ",(0,i.jsx)(n.a,{href:"./buildSync",children:(0,i.jsx)(n.code,{children:"buildSync"})})]}),"\n",(0,i.jsxs)(n.li,{children:["getting a ",(0,i.jsx)(n.a,{href:"../TxBuilderRunner%20API/TxBuilderRunner",children:(0,i.jsx)(n.code,{children:"TxBuilderRunner"})})," by passing a\n",(0,i.jsx)(n.a,{href:"../TxBuilderRunner%20API/IProvider#iprovider",children:(0,i.jsx)(n.code,{children:"Partial<IProvider>"})})," to the ",(0,i.jsx)(n.a,{href:"./runWithProvider",children:(0,i.jsx)(n.code,{children:"runWithProvider"})})," method"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"pro-and-cons",children:"Pro and Cons"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.a,{href:"./buildSync",children:(0,i.jsx)(n.code,{children:"buildSync"})})," method gives you full controll,\nyou need to query the resolved utxos for the inputs,\nas well any other information required for transaction validation."]}),"\n",(0,i.jsxs)(n.p,{children:["Once you provide the data as specified in by ",(0,i.jsx)(n.a,{href:"./buildSync#itxbuildargs",children:(0,i.jsx)(n.code,{children:"ITxBuildArgs"})}),"\nthe ",(0,i.jsx)(n.code,{children:"TxBuilder"})," instance will syncronously build and validate your transaction."]}),"\n",(0,i.jsxs)(n.p,{children:["If you don't want to take care of querying the data, you can pass a ",(0,i.jsx)(n.a,{href:"../TxBuilderRunner%20API/IProvider#iprovider",children:(0,i.jsx)(n.code,{children:"Provider"})}),"\nto the ",(0,i.jsx)(n.a,{href:"./runWithProvider",children:(0,i.jsx)(n.code,{children:"runWithProvider"})})," method,\nto get a ",(0,i.jsx)(n.a,{href:"../TxBuilderRunner%20API/TxBuilderRunner",children:(0,i.jsx)(n.code,{children:"TxBuilderRunner"})})," instance."]}),"\n",(0,i.jsxs)(n.p,{children:["The runner has many method that abstract the ",(0,i.jsx)(n.a,{href:"./buildSync",children:(0,i.jsx)(n.code,{children:"buildSync"})})," interface,\nso that you can describe your transaction an a much higher level,\nand if some that is missing it will be queried asynchronously using the ",(0,i.jsx)(n.a,{href:"../TxBuilderRunner%20API/IProvider#iprovider",children:(0,i.jsx)(n.code,{children:"Provider"})})," that was passed."]})]})}function h(e={}){const{wrapper:n}={...(0,o.M)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},4552:(e,n,r)=>{r.d(n,{I:()=>l,M:()=>s});var i=r(11504);const o={},d=i.createContext(o);function s(e){const n=i.useContext(d);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(d.Provider,{value:n},e.children)}}}]);