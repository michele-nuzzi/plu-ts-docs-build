"use strict";(self.webpackChunkplu_ts_docs=self.webpackChunkplu_ts_docs||[]).push([[2264],{98208:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var i=t(17624),a=t(4552);const o={sidebar_position:1},r="makeValidator",s={id:"onchain/API/utilities/makeValidator",title:"makeValidator",description:"Once on-chain contracts are not typed. Instead they only receive generic data arguments.",source:"@site/docs/onchain/API/utilities/makeValidator.mdx",sourceDirName:"onchain/API/utilities",slug:"/onchain/API/utilities/makeValidator",permalink:"/onchain/API/utilities/makeValidator",draft:!1,unlisted:!1,editUrl:"https://github.com/HarmonicLabs/plu-ts-docs/docs/onchain/API/utilities/makeValidator.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"compile",permalink:"/onchain/API/utilities/compile"},next:{title:"makeRedeemerValidator",permalink:"/onchain/API/utilities/makeRedeemerValidator"}},c={},d=[{value:"errorMessage",id:"errormessage",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h3:"h3",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",...(0,a.M)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"makevalidator",children:(0,i.jsx)(n.code,{children:"makeValidator"})}),"\n",(0,i.jsxs)(n.p,{children:["Once on-chain contracts are not typed. Instead they only receive generic ",(0,i.jsx)(n.code,{children:"data"})," arguments."]}),"\n",(0,i.jsxs)(n.p,{children:["This is why ",(0,i.jsx)(n.code,{children:"makeValidator"})," exsists."]}),"\n",(0,i.jsx)(n.p,{children:"the type signature is not too complicated:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"export function makeValidator(\n    typedValidator: Term<\n        PLam<\n            PType,\n            PLam<\n                PType,\n                PLam<\n                    typeof PScriptContext, \n                    PBool\n                >\n            >\n        >\n    >,\n    errorMessage?: string\n): TermFn<[PData,PData,PData], PUnit>\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"as you can see it takes any typed validator and returns a generic untyped validator so that the node will be able to evaluate it correctly."}),"\n",(0,i.jsxs)(n.admonition,{type:"caution",children:[(0,i.jsxs)(n.mdxAdmonitionTitle,{children:["use ",(0,i.jsx)(n.code,{children:"makeValidator"})," only for spending scripts"]}),(0,i.jsxs)(n.p,{children:["as you can see; ",(0,i.jsx)(n.code,{children:"makeValidator"})," expects a contract with 3 arguments."]}),(0,i.jsxs)(n.p,{children:["this means it can only be used for contracts with ",(0,i.jsx)(n.code,{children:"Spending"})," as ",(0,i.jsx)(n.code,{children:"PScriptPurpose"})]}),(0,i.jsxs)(n.p,{children:["for all other purposes you likely want to use ",(0,i.jsx)(n.a,{href:"./makeRedeemerValidator",children:(0,i.jsx)(n.code,{children:"makeRedeemerValidator"})})]})]}),"\n",(0,i.jsx)(n.h3,{id:"errormessage",children:"errorMessage"}),"\n",(0,i.jsxs)(n.p,{children:["Optionally you can pass a ",(0,i.jsx)(n.code,{children:"string"})," that will be included in the on-chain script and passed to ",(0,i.jsx)(n.code,{children:"ptrace"})," in case of failure"]})]})}function p(e={}){const{wrapper:n}={...(0,a.M)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},4552:(e,n,t)=>{t.d(n,{I:()=>s,M:()=>r});var i=t(11504);const a={},o=i.createContext(a);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);